{% load wagtailcore_tags %}

{% if self.page %}
  <a href="{% pageurl self.page %}">
    {% if self.caption %}
      {{ self.caption }}
    {% else %}
      {{ self.page.title }}
    {% endif %}
  </a>
{% elif self.url or self.anchor_id %}
    <a href="{% if self.url %}{{ self.url }}{% else %}#{{self.anchor_id}}{% endif %}">
      {{ self.caption }}
    </a>
{% endif %}